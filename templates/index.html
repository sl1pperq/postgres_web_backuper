<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Database Information</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
            integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
            crossorigin="anonymous"></script>
</head>
<body>
<div class="container">
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/29/Postgresql_elephant.svg/993px-Postgresql_elephant.svg.png" width="100" class="img-fluid"/>
    <h2 class="mt-3 mb-4">Базы данных</h2>
    <div class="row gy-5">
        <form method="POST">
            <div class="row gy-3">
                <div class="accordion rounded-4" id="accordionFlushExample">
                    {% for database in groups %}
                        <div class="accordion-item rounded-4" style="background-color: #fffcfb">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                        data-bs-target="#flush-collapse-{{ loop.index }}" aria-expanded="false"
                                        aria-controls="flush-collapse-{{ loop.index }}">
                                    <h5>{{ database }}</h5>
                                </button>
                            </h2>
                            <div id="flush-collapse-{{ loop.index }}" class="accordion-collapse collapse"
                                 data-bs-parent="#accordionFlushExample">
                                <div class="accordion-body">


                                    <table class="table">
                                        <thead>
                                        <tr>
                                            <th>Название б/д</th>
                                            <th>Обновление</th>
                                        </tr>
                                        </thead>
                                        <tbody>

                                        <tr>
                                            {% for record in groups[database] %}
                                                <td>{{ record.schema }}</td>
                                                <td>
                                                    <div class="row">
                                                        <div class="form-group col-12">
                                                            <label for="frequencySelect">Частота:</label>
                                                            <select class="form-control form-select"
                                                                    id="frequencySelect"
                                                                    name="frequency_{{ record.database }}_{{ record.schema }}">
                                                                <option {% if record.freq=="never" %}
                                                                    selected {% endif %}
                                                                    value="never">Никогда
                                                                </option>
                                                                <option {% if record.freq=="daily" %}
                                                                    selected {% endif %}
                                                                    value="daily">Ежедневно
                                                                </option>
                                                                <option {% if record.freq=="weekly" %}
                                                                    selected {% endif %}
                                                                    value="weekly">Еженедельно
                                                                </option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </td>
                                                </tr>
                                            {% endfor %}

                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                    {% endfor %}
                </div>
            </div>
            <div class="d-grid gap-2 mt-4" style="margin-bottom: 100px">
                <button id="b" type="submit" class="btn btn-warning btn-lg rounded-4">Сохранить</button>
            </div>
        </form>
    </div>

    <!-- Подключаем библиотеку Popper.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>

    <!-- Подключаем библиотеку Bootstrap JS -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</div>
</body>
</html>
